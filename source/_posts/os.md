---
title: 操作系统
date: 2022-11-09 21:37:43
categories: 
 - 学习
---

# 基础

## 1.1 什么是操作系统

可以这么说，操作系统是在硬件资源之上，应用程序之下，运行在内核态的软件。
它是应用程序和硬件之间的媒介，向应用程序提供硬件的抽象，以及管理硬件资源。

## 1.2 操作系统四大功能模块

内存管理、进程管理、⽂件系统管理、输⼊输出设备管理
1. 进程调度能力：管理进程、线程，决定哪个进程、线程使用CPU。
2. 内存管理能力：决定内存的分配和回收。
3. 硬件通信能力：管理硬件，为进程和硬件之间提供通信。
4. 系统调用能力：应用程序进行更高限权运行的服务，需要系统调用，用户程序和操作系统之间的接口。

# 程序、进程、线程

## 1.1 程序、进程、线程的区别与概念

程序：是一个静态的概念，一般对应于操作系统中的可执行的文件。当程序被加载到内存中执行时，这个运行的程序就被称为进程。

进程：是一个动态的概念。进程是对运行时程序的封装， 是操作系统进行资源调度和分配的基本单位。

执行中的程序叫做进程(Process)，是一个动态的概念。现代的操作系统都可以同时启动多个进程。

## 1.2 进程

### 1.2.1 进程的状态
某个进程在某个时刻所处的状态分为以下几种，运行态running、就绪态ready、阻塞态wait。

对于阻塞状态；比如read系统调用阻塞，进程会占用内存空间，这是一种浪费行为，于是操作系统会有跟内存管理中物理页置换到磁盘一样的行为，把阻塞的进程置换到磁盘中，此时进程未占用物理内存。

我们称之为挂起；挂起不仅仅可能是物理内存不足，比如sleep系统调用过着用户执行Ctrl+Z也可能导致挂起。

除了创建和结束一般有三个状态：

运行态run：该时刻进程占用CPU

就绪态ready：可运行，由于其他进程处于运行状态而暂时停止运行

阻塞态wait：该进程正在等待某一事件发生（如等待输入／输出操作的完成）而暂时停止运行

阻塞态的进程占用着物理内存，在虚拟内存管理的操作系统中，通常会把阻塞态的进程的物理内存空间换出到硬盘，等需要再次运行的时候，再从硬盘换入到物理内存。

挂起态：新的状态，描述进程没有占用实际的物理内存空间的情况，这个状态就是挂起状态阻塞挂起状态：进程在外存（硬盘）并等待某个事件的出现

就绪挂起状态：进程在外存（硬盘），但只要进入内存，马上运行

特点：

1.就绪态和运行态可以相互转换，其它的都是单向转换。就绪态的进程通过调度算法从而获得CPU时间，转为运行状态;

2.运行态的进程，在分配给它的CPU时间片用完之后就会转为就绪状态，等待下一次调度。

3.阻塞态是缺少需要的资源从而由运行态转换而来，但是该资源不包括CPU时间，缺少CPU时间会从运行态转换为就绪态。

### 1.2.2 进程切换 进程控制块 PCB

操作系统对进程的感知，是通过进程控制块 **PCB数据结构** 来描述的。它是进程存在的**唯一标识**，其包括以下信息：

1．进程描述信息：进程标识符、用户标识符等；

2．进程控制和管理信息：进程状态，进程优先级等；

3．进程资源分配清单：虚拟内存地址空间信息，打开文件列表，I0设备信息等；

4．CPU相关信息：当进程切换时，CPU寄存器的值都被保存在相应PCB中，以便CPU重新执行该进程时能从断点处继续执行；

PCB通过链表形式组织起来，比如有就绪队列、阻塞队列等，方便增删，方便进程管理。

### 1.2.3  父进程 子进程 僵尸进程 孤儿进程 

## 1.3 线程



