---
title: HTTP笔记
date: 2022-08-13 15:21:43
categories: 
 - note
---

# HTTP

## TCP/IP 的分层管理及主要协议

1. 应用层：应用层决定了向用户提供应用服务时通信的活动。（HTTP、DNS、FTP）


2. 传输层：传输层对上层应用层，提供处于网络连接中两台计算机之间的数据传输。（TCP）


3. 网络层: 网络层用来处理在网络上流动的数据包，数据包是网络传输的最小数据单位。规定了通过怎样的路径到达对方计算机，并把数据包传送给对方。（IP、ARP）


4. 链路层: 用来处理连接网络的硬件部分。包括设备驱动、网卡、光纤等物理可见部分。


## 在浏览器中输入url地址后发生的所有过程
[参考](https://www.jianshu.com/p/c1dfc6caa520)

1. DNS: 通过DNS将域名解析为目标服务器的IP地址
2. TCP: 获取到目标服务器的IP地址后，发起TCP的三次握手，与目标服务器建立TCP连接。
3. HTTP: 建立TCP连接后，发送HTTP报文向服务器请求资源，TCP会将HTTP请求报文按序号分割成多个报文段，并把每个报文段可靠的传给对方
4. 服务器接受并处理完请求后，返回 HTTP 响应给浏览器客户端。
5. 完成一次 HTTP 请求后，服务器会根据是否是长连接，来决定是不是断开TCP连接。在 HTTP/1.1 中，Connection: keep-alive 是默认启用的，表示持久连接。
在服务器持久连接设定的超时时间（默认75秒）内没有新到达的请求，则断开与客户端的连接。而，浏览器客户端每隔 45 秒会向服务器发送 TCP keep-alive 探测包，
来判断 TCP 连接状况，如果没有收到 ACK 应答，则主动断开与服务器的连接。HTTP keep-alive 和 TCP keep-alive 虽然都是一种保活机制，但是它们完全不相同，
一个作用于应用层，一个作用于传输层。
6. 断开TCP连接 四次挥手
7. 浏览器解析htm代码,并请求htm代码中的资源(如js、css图片等)
8. 浏览器将返回的数据按顺序解析html文件，构建DOM树和CSS规则树生成渲染树。 遇到外部CSS链接时，以异步方式来获取资源，不会产生阻塞并继续加载解析HTML。当 CSS 下载完毕后，主线程在合适的时机解析 CSS 内容。
   但在解析执行JS脚本时，会停止解析后续HTML，可能会出现阻塞问题。
9. 渲染树构建完毕后，根据渲染树的布局，在页面显示的过程中会多次进行Reflow和Repaint操作，计算每个节点在页面中的大小和位置等几何信息。HTML默认是流式布局的，CSS和js会打破这种布局，
改变DOM的外观样式以及大小和位置。

replaint：屏幕的一部分重画，不影响整体布局，比如某个CSS的背景色变了，但元素的几何尺寸和位置不变。
reflow： 意味着元件的几何尺寸变了，我们需要重新验证并计算渲染树。是渲染树的一部分或全部发生了变化。这就是Reflow，或是Layout。

浏览器解析css，形成CSS规则树，当DOM树构建完成后，浏览器引擎通过DOM树和CSS规则树构造出渲染树。
渲染树中包含可视节点的样式信息（不可见节点将不会被添加到渲染树中，如：head元素和display值为none的元素）

## URI和URL区别
1）URL是URI的子集，我们所看到的URL是一种特殊的URI，它是URI的一种实现形式，也即一个URL一定是一个URI，但URI不一定是URL
2）URL是绝对的，于整个网络而言，一个提供访问到确切资源的链接是一个URL（也属于URI）
3）URI既有相对性又有绝对性
URI(Identifier) 指定某个资源的唯一识别编号，用身份证号来唯一标识一个人。每个人都有自己的身份证号，对应每个资源有每个资源的URI来作为该资源的标识
知道该资源的唯一标识，并不一定知道该资源的具体位置。每个协议有自己的规范来给该协议下的资源做标识。
URL(Locator)   指定这个资源的路径，类似于具体的身份证卡片，可以通过身份证上的地址来找到每个人的位置。

## TCP和UDP的区别
[参考](https://www.cnblogs.com/fundebug/p/differences-of-tcp-and-udp.html#:~:text=%E6%80%BB%E7%BB%93%201%20TCP%E5%90%91%E4%B8%8A%E5%B1%82%E6%8F%90%E4%BE%9B%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%9C%8D%E5%8A%A1%20%EF%BC%8CUDP%E5%90%91%E4%B8%8A%E5%B1%82%E6%8F%90%E4%BE%9B%E6%97%A0%E8%BF%9E%E6%8E%A5%E4%B8%8D%E5%8F%AF%E9%9D%A0%E6%9C%8D%E5%8A%A1%E3%80%82%202%20%E8%99%BD%E7%84%B6,UDP%20%E5%B9%B6%E6%B2%A1%E6%9C%89%20TCP%20%E4%BC%A0%E8%BE%93%E6%9D%A5%E7%9A%84%E5%87%86%E7%A1%AE%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B9%9F%E8%83%BD%E5%9C%A8%E5%BE%88%E5%A4%9A%E5%AE%9E%E6%97%B6%E6%80%A7%E8%A6%81%E6%B1%82%E9%AB%98%E7%9A%84%E5%9C%B0%E6%96%B9%E6%9C%89%E6%89%80%E4%BD%9C%E4%B8%BA%203%20%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%87%86%E7%A1%AE%E6%80%A7%E8%A6%81%E6%B1%82%E9%AB%98%EF%BC%8C%E9%80%9F%E5%BA%A6%E5%8F%AF%E4%BB%A5%E7%9B%B8%E5%AF%B9%E8%BE%83%E6%85%A2%E7%9A%84%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%89%E7%94%A8TCP)



